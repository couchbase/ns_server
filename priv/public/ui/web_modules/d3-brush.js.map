{"version":3,"file":"d3-brush.js","sources":["../node_modules/d3-brush/src/constant.js","../node_modules/d3-brush/src/event.js","../node_modules/d3-brush/src/noevent.js","../node_modules/d3-brush/src/brush.js"],"sourcesContent":["export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(target, type, selection) {\n  this.target = target;\n  this.type = type;\n  this.selection = selection;\n}\n","import {event} from \"d3-selection\";\n\nexport function nopropagation() {\n  event.stopImmediatePropagation();\n}\n\nexport default function() {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {customEvent, event, touch, mouse, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nfunction toucher(identifier) {\n  return function(target) {\n    return touch(target, event.touches, identifier);\n  };\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter() {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name “__brush” rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection) {\n    if (group.selection) {\n      group\n          .on(\"start.brush\", function() { emitter(this, arguments).beforestart().start(); })\n          .on(\"interrupt.brush end.brush\", function() { emitter(this, arguments).end(); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start().brush().end();\n          });\n    }\n  };\n\n  brush.clear = function(group) {\n    brush.move(group, null);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    return (!clean && that.__brush.emitter) || new Emitter(that, args);\n  }\n\n  function Emitter(that, args) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function() {\n      if (this.starting) this.starting = false, this.emit(\"start\");\n      else this.emit(\"brush\");\n      return this;\n    },\n    brush: function() {\n      this.emit(\"brush\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\");\n      return this;\n    },\n    emit: function(type) {\n      customEvent(new BrushEvent(brush, type, dim.output(this.state.selection)), listeners.apply, listeners, [type, this.that, this.args]);\n    }\n  };\n\n  function started() {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        pointer = event.touches ? toucher(event.changedTouches[0].identifier) : mouse,\n        point0 = pointer(that),\n        point = point0,\n        emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      state.selection = selection = [\n        [w0 = dim === Y ? W : point0[0], n0 = dim === X ? N : point0[1]],\n        [e0 = dim === Y ? E : w0, s0 = dim === X ? S : n0]\n      ];\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    nopropagation();\n    interrupt(that);\n    redraw.call(that);\n    emit.start();\n\n    function moved() {\n      var point1 = pointer(that);\n      if (shifting && !lockX && !lockY) {\n        if (Math.abs(point1[0] - point[0]) > Math.abs(point1[1] - point[1])) lockY = true;\n        else lockX = true;\n      }\n      point = point1;\n      moving = true;\n      noevent();\n      move();\n    }\n\n    function move() {\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = Math.max(W - w0, Math.min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = Math.max(N - n0, Math.min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (signX < 0) dx = Math.max(W - w0, Math.min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n          else if (signX > 0) dx = Math.max(W - e0, Math.min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n          if (signY < 0) dy = Math.max(N - n0, Math.min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n          else if (signY > 0) dy = Math.max(N - s0, Math.min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = Math.max(W, Math.min(E, w0 - dx * signX)), e1 = Math.max(W, Math.min(E, e0 + dx * signX));\n          if (signY) n1 = Math.max(N, Math.min(S, n0 - dy * signY)), s1 = Math.max(N, Math.min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush();\n      }\n    }\n\n    function ended() {\n      nopropagation();\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end();\n    }\n\n    function keydowned() {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent();\n    }\n\n    function keyupped() {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move();\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent();\n    }\n  }\n\n  function touchmoved() {\n    emitter(this, arguments).moved();\n  }\n\n  function touchended() {\n    emitter(this, arguments).ended();\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n"],"names":["x","target","type","selection","this","nopropagation","event","stopImmediatePropagation","preventDefault","MODE_DRAG","name","MODE_SPACE","MODE_HANDLE","MODE_CENTER","number1","e","number2","toucher","identifier","touch","touches","X","handles","map","input","output","xy","Y","y","XY","cursors","overlay","n","s","w","nw","ne","se","sw","flipX","flipY","signsX","signsY","t","defaultFilter","ctrlKey","button","defaultExtent","svg","ownerSVGElement","hasAttribute","viewBox","baseVal","width","height","value","defaultTouchable","navigator","maxTouchPoints","local","node","__brush","parentNode","empty","extent","brushSelection","state","dim","brushX","brush","brushY","touchending","filter","touchable","keys","listeners","dispatch","handleSize","group","property","initialize","selectAll","data","enter","append","attr","merge","each","select","handle","d","exit","remove","redraw","on","started","touchmoved","touchended","style","length","emitter","that","args","clean","Emitter","active","apply","arguments","w0","w1","n0","n1","e0","e1","s0","s1","moving","lockX","lockY","__data__","mode","metaKey","altKey","signX","signY","W","N","E","S","dx","dy","shifting","shiftKey","pointer","changedTouches","mouse","point0","point","emit","beforestart","moved","ended","view","keydowned","keyupped","dragDisable","interrupt","call","start","point1","Math","abs","noevent","move","max","min","clearTimeout","setTimeout","dragEnable","end","keyCode","tween","selection0","selection1","i","interpolate","clear","prototype","starting","customEvent","BrushEvent","_","constant","keyModifiers"],"mappings":"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"}